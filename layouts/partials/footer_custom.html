<!-- Cookie Consent Banner -->
<div id="cookie-banner" style="position: fixed; bottom: 0; left: 0; right: 0; background-color: #2c3e50; color: white; padding: 15px; z-index: 9999; display: none; font-size: 14px; box-shadow: 0 -2px 5px rgba(0,0,0,0.2);">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-8">
        <span id="cookie-text">{{ .Site.Params.cookieConsentText | default "This website uses cookies to provide you with the best possible user experience. By continuing to use this website, you consent to the use of cookies." }}</span>
        <a id="privacy-link" href="/privacy/" style="color: #3498db; text-decoration: underline; margin-left: 10px;">Privacy Policy</a>
      </div>
      <div class="col-md-4 text-right">
        <button id="lang-toggle" class="btn btn-secondary btn-sm" style="background-color: #6c757d; border: none; padding: 6px 12px; border-radius: 4px; margin-right: 10px; font-size: 12px;">
          Deutsch
        </button>
        <button id="cookie-accept" class="btn btn-primary btn-sm" style="background-color: #3498db; border: none; padding: 8px 16px; border-radius: 4px;">
          {{ .Site.Params.cookieConsentButton | default "Accept" }}
        </button>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  // Language strings
  const translations = {
    en: {
      text: "This website uses cookies to provide you with the best possible user experience. By continuing to use this website, you consent to the use of cookies.",
      privacyLink: "Privacy Policy",
      acceptButton: "Accept",
      langToggle: "Deutsch"
    },
    de: {
      text: "Diese Website verwendet Cookies, um Ihnen die bestmögliche Nutzererfahrung zu bieten. Durch die weitere Nutzung der Website stimmen Sie der Verwendung von Cookies zu.",
      privacyLink: "Datenschutzerklärung",
      acceptButton: "Akzeptieren",
      langToggle: "English"
    }
  };

  let currentLang = 'en';

  function updateLanguage(lang) {
    const translation = translations[lang];
    document.getElementById('cookie-text').textContent = translation.text;
    document.getElementById('privacy-link').textContent = translation.privacyLink;
    document.getElementById('cookie-accept').textContent = translation.acceptButton;
    document.getElementById('lang-toggle').textContent = translation.langToggle;
    currentLang = lang;
  }

  // Check if cookie consent has already been given
  if (!localStorage.getItem('cookie-consent')) {
    document.getElementById('cookie-banner').style.display = 'block';
  }

  // Handle language toggle
  document.getElementById('lang-toggle').onclick = function() {
    const newLang = currentLang === 'en' ? 'de' : 'en';
    updateLanguage(newLang);
  };

  // Handle accept button click
  document.getElementById('cookie-accept').onclick = function() {
    localStorage.setItem('cookie-consent', 'true');
    document.getElementById('cookie-banner').style.display = 'none';
  };
})();
</script>

<!-- Add Impressum link to footer -->
<style>
.footer-legal-links {
  text-align: center;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px solid #eee;
}
.footer-legal-links a {
  color: #999;
  text-decoration: none;
  margin: 0 10px;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}
.footer-legal-links a:hover {
  color: #333;
  text-decoration: underline;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const footerCredits = document.querySelector('.credits.copyright');
  if (footerCredits) {
    const legalLinks = document.createElement('div');
    legalLinks.className = 'footer-legal-links';
    // Check if German language
    const isGerman = document.documentElement.lang === 'de' || window.location.pathname.includes('/de/');
    
    if (isGerman) {
      legalLinks.innerHTML = '<a href="/impressum/">Impressum</a> | <a href="/datenschutz/">Datenschutz</a> | <a href="/agb/">AGB</a>';
    } else {
      legalLinks.innerHTML = '<a href="/legal-notice/">Legal Notice</a> | <a href="/privacy-policy/">Privacy Policy</a> | <a href="/terms-of-service/">Terms</a>';
    }
    footerCredits.parentNode.insertBefore(legalLinks, footerCredits.nextSibling);
  }
});
</script>